{% extends extended_template %}
{% load i18n %}
{% load staticfiles %}
{% load comments %}
{% load hitcount_tags %}
{% load likes_inclusion_tags %}
{% block pagelinks %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/category.css' %}">
{% endblock %}

{% block body %}
    <div class="content">
      <div class="col-sm-9 leftside" style="min-height: 1181px">
          {% if category_products %}
                <div class="Greatest-dev-resources">
                      <h3>Resources:{{ query }}</h3><hr>
                        <div class="row">
                        {% for product in category_products %}
                            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                             <div class="product">
                                <div class="productimg">
                                  <a style="cursor: hand" href="{% url 'products:detail' product.id %}"><img class='product-img img-responsive .box' src="{{ product.product_logo.url }}" alt="product logo"></a>
                                </div>
                                <h3 class="ProductName text-center">{{ product.title }}</h3>
                                <h4 class='ProductType' id="programming-category"><strong>{{ product.category }}</strong></h4>
                                <span class="UserName"><img src="{% static 'products/images/usericon.png' %}" alt=""> {{ product.user }}</span>
                                <div class='clearfix'></div>
                                <p class="product-overview">
                                    {{ product.description }}
                                </p>
                                <a href="{{ product.url }}"><button class='button download-product-btn' type="button" name="download-product-btn">Download</button></a>
                                <a href="{% url 'products:detail' product.id %}"><button class='details-product-btn button secbtn' type="button" name="details-product-btn">Details</button></a>

                                <div class="rates text-center">
                                  {% get_hit_count for product as total_hits %}
                                  {% get_comment_count for product as comment_count %}
                                  <span class="NumLikes">{{ product.vote_total }} <img src="{% static 'products/images/like.png' %}" alt=""></span>
                                  <span class="views">{{ total_hits }} <img src="{% static 'products/images/eye.png' %}" alt=""></span>
                                  <span class="comments">{{ comment_count }} <img src="{% static 'products/images/commenticon.png' %}" alt=""></span>
                                </div>
                              </div>
                        </div>
                        {% endfor %}
                        <div class="clearfix"></div>
                      </div>
                  </div>
        {% endif %}

            {% if category_products.count == 0 %}
                <p style="text-align: center; font-size:22px;margin-top:100px"><strong>Note: Sorry, we don't have resources of {{ query }} category:(</strong></p>
            {% endif %}
          </div>
       <div class="col-sm-3 text-center rightside">
        {% include 'products/right_column_page.html' %}

        <h3>Programming Category</h3><br><br>

        <form class="emailform" action="{% url 'products:search_result' %}" method="post">
            {% csrf_token %}
          <div class="input-and-img" id="radio_collections">
            <div class="radio-input">
               <input id="Category" checked="checked" type="radio" name="category" value="All" >
                <label for="Category">Any Category</label>
            </div>

            <div class="radio-input">
              <input id="Java" type="radio" name="category" value="Java">
              <label for="Java">Java</label>
            </div>

            <div class="radio-input">
              <input id="Javascript" type="radio" name="category" value="Javascript">
              <label for="Javascript">Javascript</label>
            </div>

            <div class="radio-input">
              <input id="Php" type="radio" name="category" value="Php">
              <label for="Php">PHP</label>
            </div>

            <div class="radio-input">
              <input id="Python" type="radio" name="category" value="Python">
              <label for="Python">Python</label>
            </div>

            <div class="radio-input">
              <input id="Bootstrap" type="radio" name="category" value="Bootstrap">
              <label for="Bootstrap">Bootstrap</label>
            </div>

            <div class="radio-input">
              <input id="CSS" type="radio" name="category" value="CSS">
              <label for="CSS">CSS</label>
            </div><br>

            <div class="input-and-img" >

              <input id="search" autocomplete="off" onfocus="openList()" maxlength="50" type="text" name="search" value="" placeholder="Find your category" required="required">
                <ul  id="search-results" class="list-group" style=" margin-left:4%; position: absolute; z-index: 1; list-style: none">

                 </ul>
                <input class='sendbutton' onclick="return IsEmpty();" type="submit" name="" value="Submit">

            </div>

          </div>
        </form>


      </div>
    </div>
{% endblock %}

{% block inline_javascript %}
        <script>
        $('#radio_collections input[type=radio]').click(function(){
            var buttonValue = $(this).val();
            $('#search').val(buttonValue);

        });
        </script>


    <script>

    function openList() {
        var list = document.getElementById("search-results");
            list.style.display = "block";
    }
    </script>
    <script>
    $("#search-results").on("click", "li", function() {
        $("#search").val($(this).text());

        var list = document.getElementById("search-results");
        list.style.display = "none";
    });
    </script>
{% endblock %}
